<!DOCTYPE html>
<html>
<meta charset="utf-8">
<script src="jquery-1.11.3.min.js"></script>
<script src="dist/sweetalert.min.js"></script>
<link rel="stylesheet" type="text/css" href="dist/sweetalert.css">

<head>
	<title>
		Happy Birthday 
	</title>

	<style type="text/css">

		#BlackDot
		{
			position: relative;
			left :0px;
		}
		
		#When
		{
			position: relative;
			top : -30px;
			left : 0px;

			width: 150px;
			background-color : black;
		    border-radius: 25px;
			margin : 10px 0px 0px 0px;
			text-align: center;
			opacity: 0;
		}

		#Cake
		{
			position: relative;
			top : -30px;
			left : 0px;
		}

		#LeftDiv 
		{
			position: relative;
		    width:50%;
		    float: left;
		}

		#RightDiv {
			/*position: relative;*/
		    width:50%;
		    float: left;
		}

		#DivTitle {
			/*height: 45px;*/
		    border-radius: 25px 25px 0px 0px;
			background-color : rgb(212,70,70);
			font-family : sans-serif;
		}

		#DivContent
		{
		    border-radius: 0px 0px 25px 25px;
			background-color : rgb(237,237,237);
			margin : 0px 0px 0px 0px;
		}

		#DivEnd
		{
			text-align: right;
		}

	</style>
<body background="https://i.imgur.com/QmqUlIe.gif">

	<img id="BlackDot" src="images/ufo.gif" dynsrc="images/ufo.gif" width="150px" loop="0" >

	<div id="When">
		<font color="white" size="5px" id="time">19960415</font>
	</div>
	<center>
		<img id="Cake" src="images/cake.png" width="20%">
		<font color="white" size="5px" id="hint">蛋糕離家出走了 聽說10秒後會回來</font>
		<img id="ClickMe" src="images/ClickMe.png" width="100px">
		<br><br><br>
		<img id="HBcard" src="images/HBcard.png" width="90%">

		<img id="LeftCard" src="images/card.png" width="30%">
		<img id="MidCard" src="images/card.png" width="30%">
		<img id="RightCard" src="images/card.png" width="30%">

	</center>

	<div id="LeftDiv">
		<center>
			<div id="SizeController">
				<div id="DivTitle">
					<font color="White" size="6px" id="FontTitle">
						柚子出生
					</font>
				</div>

				<div id="DivContent">
					<article>
						<font color="black" size="5px" id="FontContent">
							一顆好吃的柚子誕生啦！<br>
						</font>
					</article>

					<div id="DivEnd">
						<font color="black" size="3px" id="FontEnd">
							1996/04/15&nbsp&nbsp
						</font>
					</div>
				</div>
			</div>
		</center>
	</div>

	<div id="RightDiv">
		<center>
			<img src="images/yo.png" width="50%" id="yo">
			<img src="images/lala.png" width="50%" id="lala">
			<img src="images/self_portrait.png" width="50%" id="self_portrait">
		</center>
	</div>



	<script type="text/javascript">

		var timearray = new Array("19960415","20161123","20170224","Now");
		var BDarray = new Array(5,20,5,5);
		var Whenarray = new Array(5,20,5,5);
		// var delayTimes = new Array(3000,8000,8000,1000);
		var delayTimes = new Array(1000,1000,1000);
		
		var FontTitles = new Array("柚子出生","初次聊天","初次見面");

		var FontContents = new Array(
			'一顆好吃的柚子誕生啦！<br>就在右邊哦 :D<br>',
			'原本李慈恩就出賣妳了xD<br>但不知道該聊些什麼 :3<br>後來滑一滑IG看到妳跟薇媛有合照<br>走在路上又會莫名一直看到妳xDD<br>就覺得該加了～ :D<br>',
			'沒想到第一次打招呼...<br>居然是在藝術治療xD<br>老師還是一個很嗨的吸毒犯<br>我以為妳認不出我欸xD<br>結果妳還蠻厲害der<br>');

		var FontEnds = new Array('1996/04/15&nbsp&nbsp&nbsp&nbsp&nbsp','2016/11/23&nbsp&nbsp&nbsp&nbsp&nbsp','2017/02/24&nbsp&nbsp&nbsp&nbsp&nbsp');
		
		var pictures = new Array('#yo','#lala','#self_portrait');
		var picHeights = new Array();

		var count = 0;

		$("#hint").hide();

		$("#LeftDiv").css({opacity:'0'});
		$("#RightDiv").css({opacity:'0'});
		$("#yo").css({opacity:'0'});
		$("#lala").css({opacity:'0'});
		$("#self_portrait").css({opacity:'0'});

		$("#ClickMe").hide();
		$("#HBcard").hide();

		$("#LeftCard").hide();
		$("#MidCard").hide();
		$("#RightCard").hide();

		
		$("#Cake").click(function()
		{
			$("#hint").hide();

			if(count<BDarray.length)
			{
				var BD = $("#BlackDot");
				var mytime = $("#time");
				mytime.text(timearray[count]);
	    		$("#When").animate({opacity:'0'},0);
	    		BD.attr('src', "images/ufo.gif");

				for(var i=0;i<10;i++)
				{
					if(i==9)
					{
			    		BD.animate({left:'+='+BDarray[count]+'px'},100).promise().done(function(){BD.attr('src', "images/ufo_final.gif") });
			    	}
			    	else
			    	{
			    		BD.animate({left:'+='+BDarray[count]+'px'},100);
			    	}

		    		$("#When").animate({left:'+='+Whenarray[count]+'px',opacity:'0'},100);
		    	}

				$("#FontTitle").html(FontTitles[count]);
				$("#FontContent").html(FontContents[count]);
				$("#FontEnd").html(FontEnds[count]);
	    		$("#When").animate({opacity:'100'});

	    		if(count < FontTitles.length)
	    		{
		    		$("#Cake").hide(100).delay(delayTimes[count]).show(100);
		    		if(count>0)
		    		{
		    			$(pictures[count-1]).hide();
		    			console.log(count-1);
		    		}
					$(pictures[count]).css({opacity:'100'});

					$("#hint").text("蛋糕離家出走了 聽說"+(delayTimes[count]/1000)+"秒後會回來～"	);
		    		$("#hint").show(100).delay(delayTimes[count]).hide(100);

		    		var LeftDivHeight = $("#LeftDiv").height();
		    		var picHeight = $(pictures[count]).height();
		    		var distance = (picHeight - LeftDivHeight) / 2;

		    		if(distance<0)
		    		{
		    			distance = 50;
		    		}

		    		$("#LeftDiv").css({"opacity":'100'});
		    		$("#LeftDiv").css({"top":distance});
		    		$("#RightDiv").css({opacity:'100'});

		    		count += 1;
	    		}
	    		else //count = FontTitles.length
	    		{
		    		$("#hint").hide();
					$("#LeftDiv").hide();
					$("#RightDiv").hide();

					$(pictures[count-1]).hide();
	    			console.log(count-1);

	    			$("#Cake").hide();
		    		$("#hint").text("看信時間～看完點右邊按鈕～");
		    		$("#hint").show();
		    		$("#ClickMe").show();
		    		$("#HBcard").show();
	    		}
    		}
		}); 

		$("#ClickMe").click(function()
		{
    		$("#hint").text("三張卡片都可以點，選一個喜歡的帶回家 :D");
    		$("#ClickMe").hide();

    		$("#HBcard").hide();
    		$("#LeftCard").show();
    		$("#MidCard").show();
    		$("#RightCard").show();
		});



		var CardClick = 0;
		var LeftCardFlag = true;

		$("#LeftCard").click(function(e)
		{
			if(LeftCardFlag)
			{
				$("#LeftCard").css('opacity','0');
				$("#LeftCard").attr('src', "images/MatchaTea.png");

				var gift = "一杯珍珠抹茶拿鐵";
				var another = "\n還可以再點點看其他卡片喔～";
				CardClick+=1;
				e.preventDefault(); // Prevent the href from redirecting directly
				if(CardClick>=3)
				{
					ShowGift(gift,"");
				}
				else
				{
					ShowGift(gift,another);
				}
				LeftCardFlag = false;
			}
		});


		function ShowGift(gift,another) 
		{
		    swal({
		      title: "Warning", 
		      text: "遊戲王卡發出了一道神秘的光芒！！\n恭喜你抽到「" + gift + "」 :D " + another,
		      type: "warning",
		      // showCancelButton: true
		    }, function() {
				$("#LeftCard").css('opacity','100');
		    });
		}

	</script>		

</body>

</html>